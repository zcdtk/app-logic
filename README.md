# 应用逻辑简介

app 中，开发人员常常将业务处理内容封装成方法，方便开发维护和重复使用。这些被封装的方法，里面的代码内容块，是具体业务数据处理逻辑。不同的逻辑内容，体现了不同功能业务需求和交互设计需求。

iBiz 前端模型，将此类具有公共业务需求的数据处理过程对象化，一同构成了应用逻辑的全部内容。

## 逻辑内容

在 iBiz 前端模型中，逻辑的构成是一个中性的结构模型。通过业务配置，将逻辑放入载体（视图、部件）中后，逻辑业务需求才通过结构代码块得到表现，这些代码块包含了业务逻辑模型全部内容。

应用逻辑主要模型对象构成如下：

| 模型名称 | 详情                                                         | 备注 |
| -------- | ------------------------------------------------------------ | ---- |
| 界面逻辑 | [ IPSViewLogic](https://modelapi.ibizlab.cn/#/net/ibizsys/model/view/IPSViewLogic) |      |
| 界面行为 | [ IPSUIAction](https://modelapi.ibizlab.cn/#/net/ibizsys/model/view/IPSUIAction) |      |
| 界面引擎 | [IPSUIEngine](https://modelapi.ibizlab.cn/#/net/ibizsys/model/res/IPSUIEngine) |      |

### 事件

> 注：从模型组成来讲，逻辑事件属于逻辑的一部分，它不具备单独的模型能力，此处将它单独列为一个小节，是为了方便理解。

#### 部件事件

部件事件是界面操作事件的入口，iBiz 将 app 操作界面事件业务模型构建在部件内，通过部件作为统一的出口分发处理。

例如工具栏部件，它的模型对象容纳了界面的大部分事件的起点，常规的操作逻辑，都可以从这里触发，完成应用逻辑业务过程。

数据部件也支持直接作为事件起点，如表单内的按钮、表格的操作列以及一些扩展逻辑，都是是逻辑的入口。

#### 逻辑事件

逻辑事件的功能是分发处理部件事件，其主要功能是从被指定的容器对象中获取数据，交给后续界面行为使用，两者的区别在于是在当前操作的 [控件容器]( https://modelapi.ibizlab.cn/#/net/ibizsys/model/control/IPSControlContainer ) 是否与 [部件数据容器]( https://modelapi.ibizlab.cn/#/net/ibizsys/model/control/IPSControlXDataContainer )  为同一个对象。

如果两个对象一致，则直接从该部件事件载体是部件，直接从部件获取数据；如果两个对象不一致，则该部件事件载体是视图，视图需要从对应的部件中获取数据。

业务模型在设计时，会自动判断逻辑事件指定的数据对象，逻辑代码内容，则是从数据对象获取数据。

#### 引擎事件

引擎事件是事件中比较特殊的一部分，它是基于预置引擎参数解构而来，属于 iBiz 模型内部核心逻辑 。

它主要提供一些部件与视图之间的数据交互，为二者的数据状态管理提供预置的支持逻辑。如，部件数据加载完成、数据保存完成和数据删除等一系列交互所需内容。

### 行为

行为是应用逻辑的最终执行单位，应用逻辑经过一些列流程达到行为时，已经为行为提供了明确的数据，行为需要根据其自身定义，使用数据完成业务需求。

行为多种多样的，由预置的行为，

### 引擎

引擎是 app 运行的核心逻辑，在视图的运行中，iBiz 对一些常规的视图，提供预置的逻辑处理。例如，视图参数处理、部件初始化顺序、部件事件之间的管理以及集成预置界面行为等。

作为 app 内视图运行核心的一部分， iBiz 模型针对每个不同类别的视图，定义不同的视图引擎标识。这些引擎标识指定了视图名称、视图参数（引擎事件）和成员部件，在每个业务视图文件内，将这些视图预置逻辑构建发布在视图中，成为抽象业务模型的核心运行层。

观察引擎逻辑，主要理解以下几个方面：

- 交互：部件与视图的事件交互
- 引擎事件：监控事件及其处理内容
- 行为：触发预置行为

## 逻辑结构



## 触发流程

{% mermaid %}
graph TD;
  A-->B;
  A-->C;
  B-->D;
  C-->D;
{% endmermaid %}